<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JEMEX_FISHER - Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/css/dashboard.css">
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"></path>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                        <line x1="12" y1="19" x2="12" y2="22"></line>
                    </svg>
                </div>
                <h2>JEMEX_FISHER</h2>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="active">
                        <a href="#dashboard" data-target="dashboard-tab"><i class="fas fa-chart-line"></i> Dashboard</a>
                    </li>
                    <li>
                        <a href="#phishlets" data-target="phishlets-tab"><i class="fas fa-fish"></i> Phishlets</a>
                    </li>
                    <li>
                        <a href="#lures" data-target="lures-tab"><i class="fas fa-hook"></i> Lures</a>
                    </li>
                    <li>
                        <a href="#sessions" data-target="sessions-tab"><i class="fas fa-key"></i> Sessions</a>
                    </li>
                    <li>
                        <a href="#settings" data-target="settings-tab"><i class="fas fa-cog"></i> Settings</a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <button id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</button>
            </div>
        </aside>

        <main class="content">
            <header class="top-bar">
                <div class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </div>
                <div class="top-bar-right">
                    <div class="notifications">
                        <i class="fas fa-bell"></i>
                        <span class="notification-count">2</span>
                    </div>
                    <div class="user-info">
                        <span class="user-name">Admin</span>
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                </div>
            </header>

            <div class="content-wrapper">
                <!-- Main Dashboard Section -->
                <section id="dashboard-tab" class="tab-content active">
                    <div class="dashboard-header">
                        <h2>Dashboard</h2>
                        <p class="last-updated">Last Updated: <span id="last-update-time">Loading...</span></p>
                    </div>

                    <div class="stats-cards">
                        <div class="stat-card">
                            <div class="stat-card-icon blue">
                                <i class="fas fa-fish"></i>
                            </div>
                            <div class="stat-card-info">
                                <h3 id="phishlets-count">0</h3>
                                <p>Phishlets</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-icon green">
                                <i class="fas fa-hook"></i>
                            </div>
                            <div class="stat-card-info">
                                <h3 id="lures-count">0</h3>
                                <p>Lures</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-icon purple">
                                <i class="fas fa-key"></i>
                            </div>
                            <div class="stat-card-info">
                                <h3 id="sessions-count">0</h3>
                                <p>Sessions</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-icon red">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-card-info">
                                <h3 id="credentials-count">0</h3>
                                <p>Credentials</p>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-row">
                        <div class="dashboard-col">
                            <div class="card">
                                <div class="card-header">
                                    <h3>Recent Sessions</h3>
                                    <a href="#sessions" class="btn-view-all">View All</a>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="data-table" id="recent-sessions-table">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Phishlet</th>
                                                    <th>Username</th>
                                                    <th>IP</th>
                                                    <th>Time</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="5" class="text-center">Loading...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Phishlets Section -->
                <section id="phishlets-tab" class="tab-content">
                    <div class="section-header">
                        <h2>Phishlets</h2>
                        <button class="btn-primary refresh-btn" id="refresh-phishlets">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>

                    <div class="table-responsive">
                        <table class="data-table" id="phishlets-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Author</th>
                                    <th>Status</th>
                                    <th>Hostname</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="5" class="text-center">Loading...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Lures Section -->
                <section id="lures-tab" class="tab-content">
                    <div class="content-header">
                        <h2>Lures</h2>
                        <div class="button-group">
                            <button id="create-lure-btn" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Create
                            </button>
                            <button id="update-certificates-btn" class="btn btn-warning">
                                <i class="fas fa-sync"></i> Update SSL Certificates
                            </button>
                            <button id="refresh-lures" class="btn btn-secondary">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table class="data-table" id="lures-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Phishlet</th>
                                    <th>Hostname</th>
                                    <th>Path</th>
                                    <th>Redirect URL</th>
                                </tr>
                            </thead>
                            <!-- جدول الطُعم هنا -->
                            <tbody>
                                <tr>
                                    <td colspan="5" class="text-center">Loading...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                <!-- Sessions Section -->
                <section id="sessions-tab" class="tab-content">
                    <div class="section-header">
                        <h2>Sessions</h2>
                        <div class="button-group">
                            <button class="btn-primary refresh-btn" id="sessions-refresh-btn">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table class="data-table" id="sessions-table">
                            <thead>
                                <tr>
                                    <th>Session ID</th>
                                    <th>Phishlet</th>
                                    <th>Username</th>
                                    <th>Password</th>
                                    <th>IP</th>
                                    <th>Time</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="7" class="text-center">Loading...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                <!-- Settings Section -->
                <section id="settings-tab" class="tab-content">
                    <div class="section-header">
                        <h2>Settings</h2>
                    </div>
                    <div class="settings-container">
                        <div class="settings-card">
                            <div class="settings-header">
                                <h3>General Settings</h3>
                            </div>
                            <div class="settings-body">
                                <form id="settings-form">
                                    <div class="form-group">
                                        <label for="domain-setting">Domain</label>
                                        <input type="text" id="domain-setting" class="form-control" placeholder="yourdomain.com">
                                    </div>
                                    <div class="form-group">
                                        <label for="ip-setting">Server IP</label>
                                        <input type="text" id="ip-setting" class="form-control" placeholder="123.456.789.0">
                                    </div>
                                    <div class="form-group">
                                        <label for="redirect-setting">Redirect URL</label>
                                        <input type="text" id="redirect-setting" class="form-control" placeholder="https://google.com">
                                    </div>
                                    <div class="form-actions">
                                        <button type="submit" class="btn btn-primary">Save Changes</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Create Lure Modal -->
    <div id="create-lure-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create Lure</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="create-lure-form">
                    <div class="form-group">
                        <label for="lure-phishlet">Phishlet</label>
                        <select id="lure-phishlet" class="form-control" required>
                            <option value="">Select phishlet</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="lure-hostname">Hostname (optional)</label>
                        <input type="text" id="lure-hostname" class="form-control" placeholder="Leave empty for default">
                        <small class="form-text">Custom subdomain. Leave empty to use default.</small>
                    </div>
                    <div class="form-group">
                        <label for="lure-path">Path (optional)</label>
                        <input type="text" id="lure-path" class="form-control" placeholder="e.g. /login">
                        <small class="form-text">Custom path for the lure URL.</small>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Create</button>
                        <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Hostname Setup Modal -->
    <div id="hostname-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Set Hostname</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="hostname-form">
                    <input type="hidden" id="hostname-phishlet-name">
                    <div class="form-group">
                        <label for="hostname-input">Hostname</label>
                        <input type="text" id="hostname-input" class="form-control" placeholder="Enter hostname" required>
                        <small class="form-text">e.g. login.yourdomain.com</small>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save</button>
                        <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Session View Modal -->
    <div id="session-view-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Session Details</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="tabs">
                    <div class="tab-header">
                        <div class="tab-item active" data-tab="session-info">Info</div>
                        <div class="tab-item" data-tab="session-cookies">Cookies</div>
                        <div class="tab-item" data-tab="session-params">Parameters</div>
                    </div>
                    <div class="tab-content">
                        <div id="session-info" class="tab-pane active">
                            <div class="session-info-grid">
                                <div class="session-info-item">
                                    <span class="label">Session ID:</span>
                                    <span id="session-id-value" class="value"></span>
                                </div>
                                <div class="session-info-item">
                                    <span class="label">Phishlet:</span>
                                    <span id="session-phishlet-value" class="value"></span>
                                </div>
                                <div class="session-info-item">
                                    <span class="label">IP Address:</span>
                                    <span id="session-ip-value" class="value"></span>
                                </div>
                                <div class="session-info-item">
                                    <span class="label">User Agent:</span>
                                    <span id="session-ua-value" class="value"></span>
                                </div>
                                <div class="session-info-item">
                                    <span class="label">Username:</span>
                                    <span id="session-username-value" class="value"></span>
                                </div>
                                <div class="session-info-item">
                                    <span class="label">Password:</span>
                                    <span id="session-password-value" class="value"></span>
                                </div>
                                <div class="session-info-item">
                                    <span class="label">Created:</span>
                                    <span id="session-created-value" class="value"></span>
                                </div>
                                <div class="session-info-item">
                                    <span class="label">Updated:</span>
                                    <span id="session-updated-value" class="value"></span>
                                </div>
                                <div class="session-info-item">
                                    <span class="label">Landing URL:</span>
                                    <span id="session-landing-value" class="value"></span>
                                </div>
                            </div>
                        </div>
                        <div id="session-cookies" class="tab-pane">
                            <div class="session-cookies-container">
                                <div class="cookies-actions">
                                    <button class="btn btn-success" id="download-cookies-btn">
                                        <i class="fas fa-download"></i> تنزيل سكريبت الكوكيز
                                    </button>
                                </div>
                                <table class="data-table" id="cookies-table">
                                    <thead>
                                        <tr>
                                            <th>Domain</th>
                                            <th>Name</th>
                                            <th>Value</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="3" class="text-center">No cookies available</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div id="session-params" class="tab-pane">
                            <div class="session-params-container">
                                <table class="data-table" id="params-table">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Value</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="2" class="text-center">No parameters available</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" id="session-delete-btn">Delete Session</button>
                <button class="btn btn-secondary modal-cancel">Close</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <script src="/static/js/dashboard.js"></script>
</body>
</html> 